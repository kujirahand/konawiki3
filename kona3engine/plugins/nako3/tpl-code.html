<!-- [tpl-code.html] -->

{{ raw:script_once }}

<!-- 以下毎回取り込まれる部分 -->
<div class="nako3">

<div id="nako3_editor_main_{{pid}}" class="nako3row_pad">
<form id="nako3codeform_{{pid}}" action="{{ post_url }}" method="POST">
<textarea
  style="display: none;"
  id="nako3_code_{{pid}}"
  rows="{{rows}}"
  class="nako3txt"　
  name="body"
 >{{ code }}</textarea>
<div id="ace_editor{{pid}}" class="nako3-editor {{readonly_class}}" style="height:{{edit_height}};" data-nako3-readonly="{{data_nako3_readonly}}">{{code}}</div>
<input type="hidden" name="version" value="{{ ver }}" />
</form>

</div><!-- end of #nako3_editor_main_{{pid}} -->

<div class="nako3row">
  <div id="nako3_editor_controlls_{{pid}}" class="nako3ctrl">
    <button onclick="nako3_run({{pid}}, {{ j_use_canvas }})">▶ 実行</button>
    <button onclick="nako3_clear({{pid}}, {{ j_use_canvas }})">クリア</button>
    <span id="post_span_{{pid}}" class="post_span">
      <button id="post_button_{{pid}}" onclick="nako3_post_submit({{pid}})">保存</button>
    </span>
    <span class='nako3ver'>&nbsp;&nbsp;&nbsp;v{{ ver }}</span>
  </div>
</div><!-- end of #nako3_editor_controlls_{{pid}} -->

<!-- ERROR -->
<div class="nako3row nako3error" id="nako3_error_{{pid}}" style="display:none"></div>

<!-- RESULT -->
<div id="nako3result_div_{{pid}}" class="nako3row" style="display:none;">
  <textarea class="nako3row nako3info" readonly
            id="nako3_info_{{pid}}" rows="5" style="display:none"></textarea>
</div><!-- end of #nako3_error_{{pid}} -->

<!-- FREE DOM AREA -->
<div id="nako3_div_{{ pid }}" class="nako3_div"></div>

{{ raw:canvas_code }}

</div><!-- end of #nako3 -->

<!-- dynamic js code -->
<script type="text/javascript">
(function(){
  // post
  const pid = {{pid}};
  const can_save = {{ can_save }};
  // post button
  post_button_init(pid, can_save);
  // ace_editor
  ace_editor_init(pid);
})();
</script>

<!-- [/tpl-code.html] -->
